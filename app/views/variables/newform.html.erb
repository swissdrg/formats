<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<table id="variables-table">
  <caption>Variables</caption>
  <tbody>
  <tr>
    <th>Number</th>
    <th>Description</th>
    <th>Max. Length</th>
    <th>Type</th>
  </tr>
  <% @variables.each do |var| %>
    <tr>
      <%= simple_form_for var, html: {id: "update_var_form"} do |f| %>
        <td><%= f.input :number, label: false%></td>
        <td><%= f.input :description, label: false%></td>
        <td><%= f.input :length, label: false%></td>
        <td><%= f.input :var_type, label: false%></td>
        <%= hidden_field_tag :format_id, @format_id %>
      <% end %>
    </tr>
  <% end %>
  <tr>
    <%= simple_form_for @variable, html: {id: "new_var_form"} do |f| %>
      <td><%= f.input :number, label: false%></td>
      <td><%= f.input :description, label: false%></td>
      <td><%= f.input :length, label: false%></td>
      <td><%= f.input :var_type, label: false%></td>
      <%= hidden_field_tag :format_id, @format_id %>
    <% end %>
  </tr>
  </tbody>
</table>
<script>
    $("input").keypress(function(event) {
        if (event.which == 13) {
            event.preventDefault();

            var source = event.target || event.srcElement;
            var form = source.form;
            form.submit();
            // var id = form.id;

            // if (id == "update_var_form") {
            //     form.submit();
            //     console.log("Update");
            // } else if (id == "new_var_form") {
            //     console.log("New");
            //     form.submit();
            // }
            // $("form").submit();
        }
    });
</script>