// Submits data to the controller when the input values change
// and replaces the output with the data generated by the controller.
$(document).ready(function () {
    var formatId = null;
    var dataSample = "";

    $("#format_id").bind("change", function () {
        formatId = event.srcElement.value;
        reloadOutput();
    });

    $("#data_samples_input").bind("change", function() {
        dataSample = event.srcElement.value;
        reloadOutput();
    });

    var reloadOutput = function() {
        $.ajax('/preview', {
            method: 'GET',
            dataType: "json",
            data: {
                format_id: formatId,
                data_sample: dataSample
            },
            complete: function() {},
            success: function(data) {
                //document.getElementById("outputdiv").textContent = data.preview;
                document.getElementById("outputdiv").innerHTML = data.preview;

            },
            error: function () {}
        });
    }
});